(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{26:function(e,t,n){e.exports=n(39)},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n.n(o),i=(n(31),n(12)),s=n(8),l=n(11),u=n(5),d=Object(u.b)((function(e){return{noteList:e.notes}}))((function(e){var t=e.noteList,n=Object(r.useState)(""),o=Object(s.a)(n,2),c=o[0],i=o[1],u=Object(r.useState)(t),d=Object(s.a)(u,2),m=d[0],p=d[1],f=Object(r.useState)(!1),h=Object(s.a)(f,2),E=h[0],b=h[1];Object(r.useEffect)((function(e){p(t)}),[t]);return a.a.createElement("section",{className:"sideBar"+(E?"":" not-visible")},a.a.createElement("div",{className:"logo font-bold p-3 text-xl uppercase"},a.a.createElement(l.c,{to:"/",onClick:function(){b(!1)},className:"cursor-pointer text-red-500"},"Notebook"),a.a.createElement("span",{onClick:function(){b(!E)},className:"md:hidden block float-right px-3 ml-2 rounded text-white bg-red-500 hover:bg-red-600 text-sm py-1 px-2 cursor-pointer"},"\u22ee"),a.a.createElement(l.c,{to:"/new",onClick:function(){b(!1)},className:"float-right rounded text-white bg-red-500 hover:bg-red-600 text-sm py-1 px-2 cursor-pointer"},"New")),a.a.createElement("input",{placeholder:"Search",className:"md:block hidden border-red-300 border-t border-b border-r-0 border-l-0 focus:outline-none",onChange:function(e){var n=e.target.value;return i(n),0===n.length?p(t):p(t.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())})))},onKeyUp:function(e){if("Escape"===e.key)return i(""),p(t)},value:c}),a.a.createElement("div",{className:"py-2 sidebarLinkContainer"},m.map((function(e){return a.a.createElement(l.c,{to:"/note/"+e.id,key:e.id,onClick:function(){b(!1)},className:"p-2 hover:bg-red-500 hover:text-white cursor-pointer block"},e.title)}))))})),m=n(2);function p(e){return{type:"SET_USER",user:e}}var f=n(16);var h=Object(m.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTE":return[].concat(Object(f.a)(e),[t.note]);case"EDIT_NOTE":var n=Object(f.a)(e),r=n.findIndex((function(e){return e.id===parseInt(t.note.id)}));return n.splice(r,1,t.note),n;case"DELETE_NOTE":var a=Object(f.a)(e),o=a.findIndex((function(e){return e.id===parseInt(t.id)}));return a.splice(o,1),a;case"SET_NOTES":return t.notes;default:return e}},state:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"STATE_SUCCESS":return"STATE_SUCCESS";case"STATE_ERROR":return"STATE_ERROR";case"STATE_PENDING":return"STATE_PENDING";default:return"STATE_SUCCESS"}}}),E=n(25),b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,g=E.a,v=Object(m.e)(h,{},b(Object(m.a)(g))),S={base:"https://notebook-api.shubhamschahar.com/api/",auth:"login",note:"note"},y=function(e){return e.status,e.json().then((function(t){return{status:e.status,message:e.statusText,body:t}}))},w=function(){var e=v.getState().user;return e?fetch(S.base+S.note,{method:"get",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e.token)}}).then(y):Promise.resolve({status:200,message:"Fetched  from localstorage",body:JSON.parse(localStorage.getItem("notes"))||[]})},x=function(e){var t=v.getState().user;if(t){var n=new FormData;for(var r in e)e.hasOwnProperty(r)&&n.append(r,e[r]);return fetch(S.base+S.note,{method:"post",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.token)},body:n}).then(y)}return Promise.resolve({status:200,message:"Fetched  from localstorage",body:JSON.parse(localStorage.getItem("notes"))||[]})},N=function(e){var t=v.getState().user;if(t){var n=new FormData;for(var r in e)e.hasOwnProperty(r)&&n.append(r,e[r]);return fetch(S.base+S.note+"/"+e.id,{method:"put",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.token),"Content-Type":"application/json"},body:JSON.stringify(e)}).then(y)}return Promise.resolve({status:200,message:"Fetched from localstorage",body:JSON.parse(localStorage.getItem("notes"))||[]})},T=function(e){var t=v.getState().user;return t?fetch(S.base+S.note+"/"+e,{method:"delete",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.token)}}).then(y):Promise.resolve({status:200,message:"Fetched  from localstorage",body:JSON.parse(localStorage.getItem("notes"))||[]})},O=function(e){return function(e){e({type:"STATE_PENDING"}),w().then((function(t){if(200!==t.status)throw new Error("failed fetch!");e({type:"SET_NOTES",notes:t.body}),e({type:"STATE_SUCCESS"})})).catch((function(t){e({type:"STATE_ERROR"})}))}},k=function(e){return function(t){t({type:"STATE_PENDING"}),x(e).then((function(e){if(200!==e.status)throw new Error("failed fetch!");t(function(e){return{type:"ADD_NOTE",note:e}}(e.body)),t({type:"STATE_SUCCESS"})})).catch((function(e){t({type:"STATE_ERROR"})}))}},_=function(e){return function(t){t({type:"STATE_PENDING"}),N(e).then((function(e){if(200!==e.status)throw new Error("failed fetch!");t(function(e){return{type:"EDIT_NOTE",note:e}}(e.body)),t({type:"STATE_SUCCESS"})})).catch((function(e){t({type:"STATE_ERROR"})}))}},A=function(e){return function(t){t({type:"STATE_PENDING"}),T(e).then((function(e){if(200!==e.status)throw new Error("failed fetch!");t({type:"DELETE_NOTE",id:e.body.id}),t({type:"STATE_SUCCESS"})})).catch((function(e){t({type:"STATE_ERROR"})}))}},j=function(e){return fetch(S.base+S.auth,{method:"post",body:e}).then(y)},C=function(e){return Promise.resolve(localStorage.setItem("user",JSON.stringify(e)))},R=function(){return Promise.resolve(localStorage.removeItem("user"))},P=function(e){var t=e.email,n=e.password;return function(e){e({type:"STATE_PENDING"});var r=new FormData;return r.append("email",t),r.append("password",n),j(r).then((function(t){switch(t.status){case 200:return C(t.body).then((function(){return Promise.resolve(e(p(t.body))).then(Promise.resolve(e(O()))).then(Promise.resolve(e({type:"STATE_SUCCESS"}))).then((function(){return{emailError:"",passwordError:""}}))}));case 422:var n={};return"email"in t.body?n.emailError=t.body.email[0]:n.emailError="","password"in t.body?n.passwordError=t.body.password[0]:n.passwordError="",e({type:"STATE_ERROR"}),Promise.resolve(n);default:return e({type:"STATE_ERROR"}),Promise.resolve({emailError:"",passwordError:""})}})).catch((function(t){return e({type:"STATE_ERROR"}),Promise.resolve({emailError:"",passwordError:""})}))}},I=function(){return function(e){R().then((function(t){e(p(null)),e(O())}))}};var D=Object(u.b)((function(e){return{user:e.user,state:e.state}}),(function(e){return Object(m.b)({doLogin:P,doLogout:I,fetchNotes:O},e)}))((function(e){var t=e.user,n=e.doLogin,r=e.doLogout,o=(e.fetchNotes,e.state);return a.a.createElement("div",{className:" flex justify-center items-center h-screen"},a.a.createElement("div",null,a.a.createElement("div",{className:"app-name text-4xl font-bold tracking-widest text-red-500 w-100 text-center mb-5"},"Notebook"),t?a.a.createElement("div",{className:"text-center"},a.a.createElement("div",{className:"mb-5"},"Welcome, ",t.name),a.a.createElement("button",{className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white uppercase rounded focus:outline-none block mx-auto",onClick:function(){r()}},"Logout")):a.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault();var t=e.target,r=t.email.value,a=t.password.value;n({email:r,password:a})}},"STATE_ERROR"===o?a.a.createElement("span",{className:"text-red-500 text-xs text-center w-full block mb-3"},"Please check your details!"):"",a.a.createElement("input",{placeholder:"Email",name:"email",type:"email",className:"block py-2 w-64 focus:outline-none hover:bg-gray-100 focus:bg-gray-100 mb-3 mx-auto"}),a.a.createElement("input",{placeholder:"Password",name:"password",type:"password",className:"block py-2 w-64 focus:outline-none hover:bg-gray-100 focus:bg-gray-100 mb-5 mx-auto"}),a.a.createElement("button",{className:"px-3 py-1 bg-red-500 hover:bg-red-600 text-white uppercase rounded focus:outline-none block mx-auto mb-3",type:"submit"},"Login"),a.a.createElement("span",{className:"text-xs text-red-500 block text-center"},"Logging in will create account if not present already!"),a.a.createElement("span",{className:"text-xs text-red-500 block text-center"},"No verification required!"))))})),L=Object(u.b)((function(e){return{notes:e.notes}}),(function(e){return Object(m.b)({addNote:k},e)}))((function(e){e.notes;var t=e.addNote,n=Object(r.useState)(""),o=Object(s.a)(n,2),c=o[0],i=o[1],l=Object(r.useState)(""),u=Object(s.a)(l,2),d=u[0],m=u[1];return a.a.createElement("div",null,a.a.createElement("div",{className:"py-3 md:px-8 px-3 border-b border-red-300"},a.a.createElement("input",{placeholder:"Please enter a title...",onChange:function(e){i(e.target.value)},value:c,className:"text-xl font-bold text-red-500 focus:outline-none",tabIndex:"0",style:{width:"calc(100% - 50px)"}}),a.a.createElement("button",{onClick:function(){if(c.trim()){var e={id:(new Date).getTime(),title:c,description:d};t(e),i(""),m("")}},tabIndex:"3",className:"float-right uppercase rounded text-white bg-red-500 hover:bg-red-600 text-sm py-1 px-2 cursor-pointer"},"Save")),a.a.createElement("div",{className:"md:px-8 px-3",style:{height:"calc(100vh - 55px)"}},a.a.createElement("textarea",{placeholder:"Please write some description...",onChange:function(e){m(e.target.value)},value:d,tabIndex:"2",className:"block mb-3 w-full h-full md:px-2 py-1 focus:outline-none",style:{minHeight:"15rem",resize:"none"}})))})),U=Object(u.b)((function(e){return{notes:e.notes}}),(function(e){return Object(m.b)({editNote:_,deleteNote:A},e)}))((function(e){var t=e.notes,n=e.match,o=e.history,c=e.editNote,i=e.deleteNote,l=Object(r.useState)(""),u=Object(s.a)(l,2),d=u[0],m=u[1],p=Object(r.useState)(""),f=Object(s.a)(p,2),h=f[0],E=f[1],b=n.params.id,g=t.find((function(e){return e.id===parseInt(b)}));Object(r.useEffect)((function(){m(g.title||""),E(g.description||"")}),[g.title,g.description]);return a.a.createElement("div",null,a.a.createElement("div",{className:"py-3 md:px-8 px-3 border-b border-red-300"},a.a.createElement("input",{placeholder:"Title",onChange:function(e){m(e.target.value)},value:d,className:"text-xl font-bold text-red-500 focus:outline-none",style:{width:"calc(100% - 120px)"}}),a.a.createElement("button",{onClick:function(){i(b),o.push("/")},className:"float-right uppercase rounded text-white bg-red-500 hover:bg-red-600 text-sm py-1 px-2 cursor-pointer"},"Delete"),a.a.createElement("button",{onClick:function(){var e={id:parseInt(b),title:d,description:h};c(e)},className:"float-right uppercase rounded text-white bg-green-500 hover:bg-green-600 text-sm py-1 px-2 cursor-pointer mr-1"},"Save")),a.a.createElement("div",{className:"md:px-8 px-3 flex",style:{height:"calc(100vh - 55px)"}},a.a.createElement("textarea",{placeholder:"Please write some description...",onChange:function(e){E(e.target.value)},value:h,className:"block mb-3 w-full h-full md:px-2 py-1 focus:outline-none",style:{minHeight:"15rem",resize:"none"}})))})),J=(n(37),n(38),Object(u.b)((function(e){return{state:e.state,user:e.user}}),(function(e){return{}}))((function(e){var t=e.state,n=e.user;return"STATE_PENDING"===t?a.a.createElement("div",{className:"w-screen h-screen flex justify-center items-center"},a.a.createElement("img",{src:"/loader.gif",alt:"loading",className:"loader"})):a.a.createElement("div",null,n?a.a.createElement(d,null):"",a.a.createElement("div",{className:"mainContainer"+(n?"":" guest")},n?a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/new",exact:!0,render:function(e){return a.a.createElement(L,null)}}),a.a.createElement(i.a,{path:"/note/:id",exact:!0,render:function(e){return a.a.createElement(U,e)}}),a.a.createElement(i.a,{path:"/",render:function(e){return a.a.createElement(D,null)}})):a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/",render:function(e){return a.a.createElement(D,null)}}))))}))),W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}v.dispatch(p(JSON.parse(localStorage.getItem("user"))||null)),v.dispatch(O()),c.a.render(a.a.createElement(u.a,{store:v},window.location.hostname.indexOf("github.io")>=0?a.a.createElement(l.b,null,a.a.createElement(J,null)):a.a.createElement(l.a,null,a.a.createElement(J,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/notebook",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/notebook","/service-worker.js");W?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):G(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):G(t,e)}))}}()}},[[26,1,2]]]);
//# sourceMappingURL=main.38852e9a.chunk.js.map